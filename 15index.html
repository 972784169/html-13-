<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title></title>
</head>
<body>
<div>
  <canvas id="myCanvas" height="1970px" width="1800px"></canvas>
</div>
</body>
</html>
<script>
  var mycanvas = document.getElementById('myCanvas');
  var ctx = mycanvas.getContext("2d");
  //流程块
  function Can(ctx,Bolds,BorderColor,DistanceX,DistanceY,Widths,Hights,Bcolor,FontColor,FontS,Texts,textX,textY){
    //边框背景
    ctx.beginPath();
    ctx.lineWidth=Bolds;
    ctx.strokeStyle=BorderColor;//边框颜色
    ctx.rect(DistanceX,DistanceY,Widths,Hights);
    ctx.fillStyle=Bcolor;//背景颜色
    ctx.fill();
    ctx.fillStyle=FontColor;//字体颜色
    ctx.font = FontS;
    ctx.fillText(Texts, textX, textY);
    ctx.stroke();
    ctx.closePath();
  };
  
 //菱形
   function diamond(ctx,BorderColor,Bcolor,A,B,C,D,E,F,G,H){
    //边框背景
    ctx.beginPath();
	ctx.strokeStyle=BorderColor;//边框颜色
	ctx.fillStyle=Bcolor;//背景颜色
	ctx.moveTo(A,B);
	ctx.lineTo(C,D);
	ctx.lineTo(E,F);
	ctx.lineTo(G,H);
	ctx.lineTo(A,B);
	ctx.fill();
	ctx.stroke();
    ctx.closePath();
  };
  //字体
  function Fon(FontS,Texts,textX,textY,color){
    ctx.beginPath();
    ctx.font = FontS;
    ctx.fillStyle=color;
    ctx.fillText(Texts, textX, textY);
    ctx.stroke();
    ctx.closePath();
  }
  //箭头
  function drawArrow(ctx,fromX,fromY,toX,toY,theta,headlen,width,color) {
    theta = typeof(theta) != 'undefined' ? theta : 30;
    headlen = typeof(theta) != 'undefined' ? headlen : 10;
    width = typeof(width) != 'undefined' ? width : 1;
    color = typeof(color) != 'color' ? color : '#000'; // 计算各角度和对应的P2,P3坐标
    var angle = Math.atan2(fromY - toY, fromX - toX) * 180 / Math.PI,
      angle1 = (angle + theta) * Math.PI / 180,
      angle2 = (angle - theta) * Math.PI / 180,
      topX = headlen * Math.cos(angle1),
      topY = headlen * Math.sin(angle1),
      botX = headlen * Math.cos(angle2),
      botY = headlen * Math.sin(angle2);
    ctx.save();
    ctx.beginPath();
    var arrowX = fromX - topX;
    var arrowY = fromY - topY;
    ctx.moveTo(arrowX, arrowY);
    ctx.moveTo(fromX, fromY);
    ctx.lineTo(toX, toY);
    arrowX = toX + topX;
    arrowY = toY + topY;
    ctx.moveTo(arrowX, arrowY);
    ctx.lineTo(toX, toY);
    arrowX = toX + botX;
    arrowY = toY + botY;
    ctx.lineTo(arrowX, arrowY);
    ctx.strokeStyle = color;
    ctx.lineWidth = width;
    ctx.stroke();
    ctx.restore();
  
  };
  Can(ctx,1,"#ccc",20,10,240,80,"#000","#fff","15pt Arial","酸轧计划编制流程图",50,55);
  Can(ctx,1,"#ccc",450,30,120,50,"#000","#fff","12pt Arial","收集库存信息",460,60);
  
  Can(ctx,1,"#ccc",160,130,210,50,"#000","#fff","12pt Arial","定义:PSR第12-13位=L2/L5",170,160);
  Can(ctx,1,"#ccc",450,130,120,50,"#000","#fff","12pt Arial","面板区分",475,160);
  
  Can(ctx,1,"#ccc",650,100,260,120,"#000","#fff","12pt Arial","规则:面板前放入5卷大于等于面",660,120);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial","板宽度的烫辊材。",660,150);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial","烫辊材定义：非PT料，大于面板",660,180);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial","宽度，含碳量小于400PPM",660,210);
  
  Can(ctx,1,"#ccc",160,230,210,50,"#000","#fff","12pt Arial","定义:G光面与M毛面",170,260);
  Can(ctx,1,"#ccc",450,230,120,50,"#000","#fff","12pt Arial","辊面区分",475,260);
  
  Can(ctx,1,"#ccc",160,330,210,50,"#000","#fff","12pt Arial","定义:1切边,2不切边",170,360);
  Can(ctx,1,"#ccc",450,330,120,50,"#000","#fff","12pt Arial","切边形态区分",460,360);
  
  Can(ctx,1,"#ccc",120,410,250,80,"#000","#fff","12pt Arial","1组、碳当量<=0.041(IF超低碳钢)",130,440);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial","2组、碳当量>0.041(普碳钢)",130,470);
  Can(ctx,1,"#ccc",450,430,120,50,"#000","#fff","12pt Arial","PT料区分",475,460);
  Can(ctx,1,"#ccc",650,410,250,80,"#000","red","12pt Arial","规则：正常计划不能包含PT钢",660,440);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial","连退包含了，也在正常计划内",660,470);
  
  Can(ctx,1,"#ccc",40,515,360,160,"#000","#fff","12pt Arial","C当量=C+MN/6+SI/24+Ni/40+CR/5+MO/4+V/14",50,540);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial","1组、碳当量<=0.041(IF超低碳钢)。",50,570);
   Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial","2组、碳当量>0.041  <=0.101(普碳钢)",50,600);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","red","12pt Arial","3组、碳当量>0.101  <=0.201(结构钢、双相钢)。",50,630);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","red","12pt Arial","4组、碳当量 >0.201(高强钢)",50,660);
  Can(ctx,1,"#ccc",450,560,120,50,"#000","#fff","12pt Arial","C当量区分",475,588);
  Can(ctx,1,"#ccc",650,550,250,80,"#000","red","12pt Arial","规则：正常计划不能包含PT钢",660,580);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial","连退包含了，也在正常计划内",660,610);
  
  Can(ctx,1,"#ccc",450,700,120,50,"#000","#fff","12pt Arial","材料分组建池",460,728);
  Can(ctx,1,"#ccc",650,660,290,140,"#000","#fff","12pt Arial","1、区分出：切边区分，C当量区分、",660,690);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial","PT料、辊面区分、面板区分",660,720);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial","2、每种类型只能单独排，通过过渡料",660,750);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial","计划衔接",660,780);

  Can(ctx,1,"#ccc",450,880,120,80,"#000","#fff","12pt Arial","普通计划",475,925);
  Can(ctx,1,"#ccc",1000,900,150,50,"#000","#fff","12pt Arial","宽度过渡规则",1025,930);
  Can(ctx,1,"#ccc",1000,1050,150,50,"#000","#fff","12pt Arial","厚度过渡规则",1025,1080);
  Can(ctx,1,"#ccc",1000,1175,150,50,"#000","#fff","12pt Arial","C当量规则",1032,1200);
  Can(ctx,1,"#ccc",1280,760,480,200,"#000","#fff","12pt Arial","1、1个周期计划量：光面计划1000-2000吨；毛面计划大于1500",1290,790);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial","吨；",1290,820);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial","2、优化指标：未排入计划的材料越少越好；紧急合同优先；重点",1290,850);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial","用户优先(用户等级A00-A09)",1290,880);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial","4、先按宽度排序（从宽到窄）、厚度过渡是否合理、再看碳当量",1290,910);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial","是否过渡合理(优先级：宽度>厚度>碳当量)",1290,940);
  Can(ctx,1,"#ccc",1280,1150,490,140,"#000","#fff","12pt Arial","1、1、2组和排、3组单独排，4组单独排；",1290,1180);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial","2、尽量满足1条件后1、2、3组可以混合排、只要能过渡就可以排、",1290,1210);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial","4组还是必须单独排(4最多只能跟3一起排不能和12一起排)。",1290,1240);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial","3、C当量过渡越小越好",1290,1270);
  Can(ctx,1,"#ccc",1280,1320,490,120,"#000","#fff","12pt Arial","1、1、2组和排、3组单独排，4组单独排；",1290,1340);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial","2、尽量满足1条件后1、2、3组可以混合排、只要能过渡就可以排、",1290,1370);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial","4组还是必须单独排(4最多只能跟3一起排不能和12一起排)。",1290,1400);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial","3、C当量过渡越小越好",1290,1430);
  Can(ctx,1,"#ccc",1000,1525,150,50,"#000","#fff","12pt Arial","PT料规则",1030,1555);
  Can(ctx,1,"#ccc",1280,1490,490,120,"#000","#fff","12pt Arial","1、计划中间不能插PT料，计划开头结尾可以插入PT料（只要能过",1290,1510);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial","渡，不限制数量）",1290,1540);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial","2、PT料过渡一组碳当量能过渡的范围：碳当量<=0.101;",1290,1570);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial"," PT料过渡第二组碳当量的时候，过渡无限制。",1290,1600);
  Can(ctx,1,"#ccc",450,1510,120,80,"yellow","#000","12pt Arial","过渡料计划",470,1550);
  Can(ctx,1,"#ccc",1000,1625,150,50,"#000","#fff","12pt Arial","宽度过渡规则",1030,1655);
  diamond(ctx,"#ccc","#000",510,1700,300,1760,510,1820,710,1760);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial"," 宽度/厚度过渡/C当量过渡",400,1750);
  Can(ctx,1,"#ccc",0,0,0,0,"#000","#fff","12pt Arial"," 是否合理",460,1780);
  Can(ctx,1,"#ccc",450,1900,120,80,"#000","#fff","12pt Arial","计划下发",470,1950);
  Can(ctx,1,"#ccc",150,1525,120,50,"#000","#fff","12pt Arial","加、删材料",165,1550);
//canvas环境,线X轴起点,线Y轴起点,旋转角度x,y,尖角,尖角,尖叫厚度,颜色

  drawArrow(ctx,510,130,510,80,10,10,1,'blue');
  drawArrow(ctx,510,180,510,230,10,10,1,'blue');
  
  drawArrow(ctx,650,160,570,160,10,10,1,'blue');
  drawArrow(ctx,650,455,570,455,10,10,1,'blue');
  
  drawArrow(ctx,370,160,450,160,10,10,1,'blue');
  drawArrow(ctx,370,255,450,255,10,10,1,'blue');
  drawArrow(ctx,370,355,450,355,10,10,1,'blue');
  drawArrow(ctx,370,455,450,455,10,10,1,'blue');

  
  drawArrow(ctx,510,280,510,330,10,10,1,'blue');
  drawArrow(ctx,510,380,510,430,10,10,1,'blue');
  
  drawArrow(ctx,510,480,510,560,10,10,1,'blue');
  drawArrow(ctx,400,585,450,585,10,10,1,'blue');
  drawArrow(ctx,650,585,570,585,10,10,1,'blue');
  
  drawArrow(ctx,510,600,510,700,10,10,1,'blue');
  drawArrow(ctx,650,725,570,725,10,10,1,'blue');
  
  drawArrow(ctx,510,750,510,880,10,10,1,'blue');
  drawArrow(ctx,570,925,1000,925,10,10,1,'blue');
  drawArrow(ctx,680,850,680,1200,0,0,1,'blue');
  drawArrow(ctx,680,850,1280,850,10,10,1,'blue');
  drawArrow(ctx,680,1075,1000,1075,10,10,1,'blue');
  drawArrow(ctx,680,1200,800,1200,0,0,1,'blue');
  drawArrow(ctx,800,1200,800,1190,0,0,1,'blue');
  drawArrow(ctx,800,1190,810,1190,0,0,1,'blue');
  drawArrow(ctx,810,1190,810,1200,0,0,1,'blue');
  drawArrow(ctx,810,1200,1000,1200,10,10,1,'blue');
  drawArrow(ctx,805,1200,1000,1200,10,10,1,'blue');
  drawArrow(ctx,1150,1200,1280,1200,10,10,1,'blue');
  drawArrow(ctx,805,925,805,1550,0,0,1,'blue');
  drawArrow(ctx,805,1380,1280,1380,10,10,1,'blue');
  drawArrow(ctx,570,1550,1000,1550,10,10,1,'blue');
  drawArrow(ctx,1150,1550,1280,1550,10,10,1,'blue');
  drawArrow(ctx,510,960,510,1510,10,10,1,'blue');
  drawArrow(ctx,900,1550,900,1650,0,0,1,'blue');
  drawArrow(ctx,900,1650,1000,1650,10,10,1,'blue');
  drawArrow(ctx,510,1590,510,1700,10,10,1,'blue');
  drawArrow(ctx,510,1820,510,1900,10,10,1,'blue');
  drawArrow(ctx,300,1760,80,1760,0,0,1,'blue');
  drawArrow(ctx,80,1760,80,1550,0,0,1,'blue');
  drawArrow(ctx,80,1550,150,1550,10,10,1,'blue');
  drawArrow(ctx,270,1550,450,1550,10,10,1,'blue');
  drawArrow(ctx,350,1550,350,925,0,0,1,'blue');
  drawArrow(ctx,350,925,450,925,10,10,1,'blue');
  // drawArrow(ctx,200,390,200,100,0,0,1,'blue');
  //字
  // Fon("12pt Arial","",270,30,"green");
  // Fon("12pt Arial","",270,60,'red');
</script>
